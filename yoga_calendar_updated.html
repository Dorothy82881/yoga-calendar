
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç‘œçˆèª²å ‚é€šçŸ¥ç³»çµ±</title>
  <script src="https://apis.google.com/js/api.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    label, select, input, textarea, button { display: block; margin: 10px 0; }
  </style>
</head>
<body>
  <h2>ğŸ§˜â€â™€ï¸ ç‘œçˆèª²å ‚é€šçŸ¥ç³»çµ±</h2>

  <button onclick="handleAuthClick()">ç™»å…¥ Google</button>

  <h3>å»ºç«‹æ–°èª²å ‚äº‹ä»¶</h3>
  <label>é¸æ“‡å°å¸«ï¼š</label>
  <select id="teacherSelect">
    <option value="yoga1@example.com">é™³è€å¸«</option>
    <option value="yoga2@example.com">æè€å¸«</option>
    <option value="yoga3@example.com">ç‹è€å¸«</option>
  </select>

  <label>èª²å ‚é¡å‹ï¼š</label>
  <select id="classType">
    <option value="Hatha Yoga">Hatha Yoga</option>
    <option value="Yin Yoga">Yin Yoga</option>
    <option value="Vinyasa Yoga">Vinyasa Yoga</option>
  </select>

  <label>èª²å ‚æ—¥æœŸèˆ‡æ™‚é–“ï¼š</label>
  <input type="datetime-local" id="classTime">

  <label>åœ°é»ï¼š</label>
  <input type="text" id="location" placeholder="ä¾‹å¦‚ï¼šå¤ªå­åº—">

  <button onclick="createEvent()">å»ºç«‹äº‹ä»¶</button>

  <h3>å³å°‡èˆ‰è¡Œçš„èª²å ‚</h3>
  <ul id="eventList"></ul>

  <script>
    const CLIENT_ID = '1234567890-abcde.apps.googleusercontent.com';
    const API_KEY = 'AIzaSyD-EXAMPLEKEY1234567890';
    const SCOPES = 'https://www.googleapis.com/auth/calendar.events';

    function handleAuthClick() {
      gapi.load('client:auth2', () => {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          scope: SCOPES,
        }).then(() => {
          gapi.auth2.getAuthInstance().signIn().then(() => {
            alert('ç™»å…¥æˆåŠŸï¼');
            listEvents();
          });
        });
      });
    }

    function createEvent() {
      const teacherEmail = document.getElementById('teacherSelect').value;
      const classType = document.getElementById('classType').value;
      const classTime = document.getElementById('classTime').value;
      const location = document.getElementById('location').value;

      const startDateTime = new Date(classTime);
      const endDateTime = new Date(startDateTime.getTime() + 60 * 60 * 1000);

      const event = {
        summary: classType + ' èª²å ‚é€šçŸ¥',
        location: location,
        description: 'è«‹æº–æ™‚å‡ºå¸­ ' + classType + ' èª²å ‚',
        start: {
          dateTime: startDateTime.toISOString(),
          timeZone: 'Asia/Hong_Kong',
        },
        end: {
          dateTime: endDateTime.toISOString(),
          timeZone: 'Asia/Hong_Kong',
        },
        attendees: [{ email: teacherEmail }],
        reminders: { useDefault: true },
      };

      gapi.client.calendar.events.insert({
        calendarId: 'primary',
        resource: event,
        sendUpdates: 'all',
      }).then((response) => {
        alert('äº‹ä»¶å·²å»ºç«‹ï¼š' + response.result.htmlLink);
        listEvents();
      });
    }

    function listEvents() {
      const now = new Date().toISOString();
      gapi.client.calendar.events.list({
        calendarId: 'primary',
        timeMin: now,
        showDeleted: false,
        singleEvents: true,
        maxResults: 10,
        orderBy: 'startTime',
      }).then((response) => {
        const events = response.result.items;
        const eventList = document.getElementById('eventList');
        eventList.innerHTML = '';

        events.forEach(event => {
          const li = document.createElement('li');
          li.innerHTML = `
            <strong>${event.summary}</strong><br>
            ${event.start.dateTime || event.start.date} - ${event.location || 'æœªæŒ‡å®šåœ°é»'}<br>
            <button onclick="deleteEvent('${event.id}')">åˆªé™¤</button>
          `;
          eventList.appendChild(li);
        });
      });
    }

    function deleteEvent(eventId) {
      gapi.client.calendar.events.delete({
        calendarId: 'primary',
        eventId: eventId,
      }).then(() => {
        alert('äº‹ä»¶å·²åˆªé™¤');
        listEvents();
      });
    }
  </script>
</body>
</html>
